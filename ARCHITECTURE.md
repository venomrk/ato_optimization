# ğŸ—ï¸ Architecture Overview

## System Architecture (Production)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERNET / USERS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   VERCEL CDN (Global Edge)   â”‚
              â”‚    https://rko-research      â”‚
              â”‚        .vercel.app            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚     FRONTEND (React + Vite)           â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚  â€¢ React 18                     â”‚  â”‚
         â”‚  â”‚  â€¢ React Router                 â”‚  â”‚
         â”‚  â”‚  â€¢ Modern CSS                   â”‚  â”‚
         â”‚  â”‚  â€¢ API Client                   â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTPS/REST API
                             â”‚
                             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   RAILWAY BACKEND SERVICE             â”‚
         â”‚   https://rko-research.railway.app    â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚  FASTAPI APPLICATION            â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
         â”‚  â”‚  â”‚  Auth Router             â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ JWT Authentication    â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ User Management       â”‚   â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
         â”‚  â”‚  â”‚  Research Router         â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ Paper Search          â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ Multi-Agent System    â”‚   â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
         â”‚  â”‚  â”‚  Chat Router             â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ AI Conversations      â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ OpenRouter Integrationâ”‚   â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
         â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
         â”‚  â”‚  â”‚  Billing Router          â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ Stripe Integration    â”‚   â”‚  â”‚
         â”‚  â”‚  â”‚  â€¢ Credit System         â”‚   â”‚  â”‚
         â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                â”‚
                  â”‚                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ PostgreSQL   â”‚   â”‚  External APIs â”‚
         â”‚   Database   â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚              â”‚   â”‚  â”‚OpenRouterâ”‚  â”‚
         â”‚  Railway     â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚  Managed DB  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚              â”‚   â”‚  â”‚ SerpAPI  â”‚  â”‚
         â”‚  â€¢ Users     â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚  â€¢ Papers    â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â€¢ Credits   â”‚   â”‚  â”‚ Stripe   â”‚  â”‚
         â”‚  â€¢ Sessions  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### User Registration Flow

```
User Browser
    â”‚
    â”œâ”€â–º POST /auth/signup (email, password, name)
    â”‚
    â–¼
FastAPI Backend
    â”‚
    â”œâ”€â–º Validate input (Pydantic schema)
    â”œâ”€â–º Hash password (bcrypt)
    â”œâ”€â–º Create user record
    â”‚
    â–¼
PostgreSQL Database
    â”‚
    â”œâ”€â–º Save user data
    â”œâ”€â–º Assign 100 free credits
    â”‚
    â–¼
Response
    â”‚
    â””â”€â–º JWT Token + User Info
```

### Research Query Flow

```
User Browser
    â”‚
    â”œâ”€â–º POST /papers/search (query, auth token)
    â”‚
    â–¼
FastAPI Backend
    â”‚
    â”œâ”€â–º Validate JWT token
    â”œâ”€â–º Check user credits
    â”œâ”€â–º Deduct credits (if sufficient)
    â”‚
    â–¼
SerpAPI (Google Scholar)
    â”‚
    â”œâ”€â–º Search academic papers
    â”œâ”€â–º Parse results
    â”‚
    â–¼
PostgreSQL Database
    â”‚
    â”œâ”€â–º Save search history
    â”œâ”€â–º Update credit balance
    â”‚
    â–¼
Response
    â”‚
    â””â”€â–º Research results + updated credits
```

### AI Chat Flow

```
User Browser
    â”‚
    â”œâ”€â–º POST /chat/completions (message, auth token)
    â”‚
    â–¼
FastAPI Backend
    â”‚
    â”œâ”€â–º Validate JWT token
    â”œâ”€â–º Check user credits
    â”œâ”€â–º Deduct credits (5 per request)
    â”‚
    â–¼
OpenRouter API
    â”‚
    â”œâ”€â–º Multi-agent processing
    â”œâ”€â–º Generate AI response
    â”‚
    â–¼
PostgreSQL Database
    â”‚
    â”œâ”€â–º Save chat history
    â”œâ”€â–º Update credit balance
    â”‚
    â–¼
Response
    â”‚
    â””â”€â–º AI response + updated credits
```

## Technology Stack

### Frontend Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           REACT 18                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React Router v6              â”‚  â”‚
â”‚  â”‚  â€¢ SPA routing                â”‚  â”‚
â”‚  â”‚  â€¢ Dynamic page loading       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Vite Build Tool              â”‚  â”‚
â”‚  â”‚  â€¢ Fast HMR                   â”‚  â”‚
â”‚  â”‚  â€¢ Optimized builds           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Client                   â”‚  â”‚
â”‚  â”‚  â€¢ Fetch API wrapper          â”‚  â”‚
â”‚  â”‚  â€¢ JWT token management       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend Layer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FASTAPI                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Authentication               â”‚  â”‚
â”‚  â”‚  â€¢ JWT tokens                 â”‚  â”‚
â”‚  â”‚  â€¢ Password hashing (bcrypt)  â”‚  â”‚
â”‚  â”‚  â€¢ Session management         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Database ORM                 â”‚  â”‚
â”‚  â”‚  â€¢ SQLAlchemy 2.0             â”‚  â”‚
â”‚  â”‚  â€¢ PostgreSQL driver          â”‚  â”‚
â”‚  â”‚  â€¢ Migration system           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Integrations             â”‚  â”‚
â”‚  â”‚  â€¢ OpenRouter (AI)            â”‚  â”‚
â”‚  â”‚  â€¢ SerpAPI (Search)           â”‚  â”‚
â”‚  â”‚  â€¢ Stripe (Payments)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Middleware                   â”‚  â”‚
â”‚  â”‚  â€¢ CORS handling              â”‚  â”‚
â”‚  â”‚  â€¢ Error handling             â”‚  â”‚
â”‚  â”‚  â€¢ Request logging            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     USERS        â”‚       â”‚    CREDITS       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚â—„â”€â”€â”€â”€â”€â”€â”‚ user_id (FK)     â”‚
â”‚ email (unique)   â”‚       â”‚ balance          â”‚
â”‚ password_hash    â”‚       â”‚ tier             â”‚
â”‚ name             â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ created_at       â”‚
â”‚ updated_at       â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  SEARCH_HISTORY  â”‚
         â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                 â”‚ id (PK)          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ user_id (FK)     â”‚
                          â”‚ query            â”‚
                          â”‚ results          â”‚
                          â”‚ created_at       â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   CHAT_HISTORY  â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ id (PK)         â”‚
         â”‚ user_id (FK)    â”‚
         â”‚ message         â”‚
         â”‚ response        â”‚
         â”‚ created_at      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  SUBSCRIPTIONS  â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚ id (PK)         â”‚
         â”‚ user_id (FK)    â”‚
         â”‚ stripe_sub_id   â”‚
         â”‚ status          â”‚
         â”‚ plan            â”‚
         â”‚ created_at      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

### Production Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VERCEL (Frontend)                 â”‚
â”‚  Region: Global Edge Network                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Edge Locations:                         â”‚  â”‚
â”‚  â”‚  â€¢ North America                         â”‚  â”‚
â”‚  â”‚  â€¢ Europe                                â”‚  â”‚
â”‚  â”‚  â”‚  Asia Pacific                         â”‚  â”‚
â”‚  â”‚  â€¢ South America                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  Features:                                     â”‚
â”‚  â€¢ Automatic HTTPS                             â”‚
â”‚  â€¢ Global CDN                                  â”‚
â”‚  â€¢ DDoS protection                             â”‚
â”‚  â€¢ Auto-scaling                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             RAILWAY (Backend)                  â”‚
â”‚  Region: US West (Oregon)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Container Orchestration                 â”‚  â”‚
â”‚  â”‚  â€¢ Docker containers                     â”‚  â”‚
â”‚  â”‚  â€¢ Auto-restart on failure               â”‚  â”‚
â”‚  â”‚  â€¢ Health checks                         â”‚  â”‚
â”‚  â”‚  â€¢ Rolling deployments                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  Database:                                     â”‚
â”‚  â€¢ PostgreSQL 15                               â”‚
â”‚  â€¢ Automatic backups                           â”‚
â”‚  â€¢ Connection pooling                          â”‚
â”‚  â€¢ SSL/TLS encryption                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Development Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LOCAL DEVELOPMENT                    â”‚
â”‚                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Docker Compose                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚  Frontend  â”‚  â”‚  Backend   â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  :3000     â”‚  â”‚  :8000     â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
â”‚  â”‚  â”‚ PostgreSQL â”‚  â”‚   Redis    â”‚         â”‚  â”‚
â”‚  â”‚  â”‚  :5432     â”‚  â”‚  :6379     â”‚         â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                â”‚
â”‚  Features:                                     â”‚
â”‚  â€¢ Hot reload (Vite + Uvicorn)                 â”‚
â”‚  â€¢ Volume mounts for code                      â”‚
â”‚  â€¢ Local database                              â”‚
â”‚  â€¢ Debug mode enabled                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SECURITY LAYERS                    â”‚
â”‚                                                 â”‚
â”‚  1. Transport Security                          â”‚
â”‚     â”œâ”€â–º HTTPS/TLS everywhere                   â”‚
â”‚     â””â”€â–º Certificate auto-renewal (Let's Encrypt)â”‚
â”‚                                                 â”‚
â”‚  2. Authentication                              â”‚
â”‚     â”œâ”€â–º JWT tokens (HS256)                      â”‚
â”‚     â”œâ”€â–º Bcrypt password hashing                â”‚
â”‚     â””â”€â–º Token expiration (30 min)              â”‚
â”‚                                                 â”‚
â”‚  3. Authorization                               â”‚
â”‚     â”œâ”€â–º Role-based access control              â”‚
â”‚     â”œâ”€â–º Credit-based rate limiting             â”‚
â”‚     â””â”€â–º User-scoped data access                â”‚
â”‚                                                 â”‚
â”‚  4. Data Security                               â”‚
â”‚     â”œâ”€â–º Environment variables for secrets      â”‚
â”‚     â”œâ”€â–º Database encryption at rest            â”‚
â”‚     â””â”€â–º SQL injection prevention (ORM)         â”‚
â”‚                                                 â”‚
â”‚  5. Network Security                            â”‚
â”‚     â”œâ”€â–º CORS configuration                     â”‚
â”‚     â”œâ”€â–º DDoS protection (Vercel/Railway)       â”‚
â”‚     â””â”€â–º Rate limiting                          â”‚
â”‚                                                 â”‚
â”‚  6. API Security                                â”‚
â”‚     â”œâ”€â–º Input validation (Pydantic)            â”‚
â”‚     â”œâ”€â–º Output sanitization                    â”‚
â”‚     â””â”€â–º Error message sanitization             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Scalability Plan

### Current Capacity (Free Tier)

```
Estimated Capacity:
â”œâ”€â–º Concurrent Users: ~100
â”œâ”€â–º Requests/Month: ~50,000
â”œâ”€â–º Database Storage: 5GB
â””â”€â–º Bandwidth: 100GB

Performance Targets:
â”œâ”€â–º API Response Time: <200ms (p50)
â”œâ”€â–º API Response Time: <500ms (p95)
â”œâ”€â–º Frontend Load Time: <2s
â””â”€â–º Uptime: 99.5%
```

### Scaling Strategy

```
Stage 1: Free Tier (Current)
â”œâ”€â–º Frontend: Vercel Free
â”œâ”€â–º Backend: Railway Free ($5 credit)
â”œâ”€â–º Database: Railway PostgreSQL (5GB)
â””â”€â–º Users: 0-1,000

Stage 2: Hobby Tier ($25/month)
â”œâ”€â–º Frontend: Vercel Pro ($20)
â”œâ”€â–º Backend: Railway Developer ($5)
â”œâ”€â–º Database: Railway PostgreSQL (10GB)
â””â”€â–º Users: 1,000-10,000

Stage 3: Professional Tier ($100-200/month)
â”œâ”€â–º Frontend: Vercel Pro + CDN
â”œâ”€â–º Backend: Railway Pro (multiple instances)
â”œâ”€â–º Database: Dedicated PostgreSQL (50GB)
â”œâ”€â–º Cache: Redis (Upstash Pro)
â””â”€â–º Users: 10,000-100,000

Stage 4: Enterprise (Custom)
â”œâ”€â–º Frontend: Vercel Enterprise
â”œâ”€â–º Backend: Kubernetes cluster
â”œâ”€â–º Database: Managed PostgreSQL (HA)
â”œâ”€â–º Cache: Redis Cluster
â”œâ”€â–º Queue: RabbitMQ/SQS
â””â”€â–º Users: 100,000+
```

## Monitoring & Observability

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MONITORING STACK                â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Vercel Analytics                 â”‚  â”‚
â”‚  â”‚  â€¢ Page views                     â”‚  â”‚
â”‚  â”‚  â€¢ Performance metrics            â”‚  â”‚
â”‚  â”‚  â€¢ Geographic distribution        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Railway Metrics                  â”‚  â”‚
â”‚  â”‚  â€¢ CPU/Memory usage               â”‚  â”‚
â”‚  â”‚  â€¢ Response times                 â”‚  â”‚
â”‚  â”‚  â€¢ Error rates                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Application Logs                 â”‚  â”‚
â”‚  â”‚  â€¢ Request logs                   â”‚  â”‚
â”‚  â”‚  â€¢ Error logs                     â”‚  â”‚
â”‚  â”‚  â€¢ Audit logs                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  Future: Sentry for error tracking    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Quick Reference

### Service URLs

| Service | URL | Purpose |
|---------|-----|---------|
| Frontend | `https://rko-research.vercel.app` | User interface |
| Backend | `https://rko-research.railway.app` | API server |
| API Docs | `https://rko-research.railway.app/docs` | Swagger UI |
| Health | `https://rko-research.railway.app/health` | Health check |

### Key Technologies

| Layer | Technology | Version |
|-------|------------|---------|
| Frontend Framework | React | 18.3+ |
| Build Tool | Vite | 5.2+ |
| Backend Framework | FastAPI | 0.110+ |
| Database | PostgreSQL | 15+ |
| ORM | SQLAlchemy | 2.0+ |
| Auth | JWT + bcrypt | - |
| Hosting (Frontend) | Vercel | - |
| Hosting (Backend) | Railway | - |

---

**For deployment instructions, see:** [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md)  
**For quick deploy, see:** [QUICK_DEPLOY.md](QUICK_DEPLOY.md)
